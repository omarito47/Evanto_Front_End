<div *ngIf="evaluations.length > 0; else noEvaluations">
    <div *ngFor="let evaluation of evaluations" class="card mb-3">
      <div class="card-body">
        <h4 class="card-title">Evaluation ID: {{ evaluation._id }}</h4>
        <div class="mb-3">
          <p><strong>Rating:</strong> {{ evaluation.rating }}</p>
          <p><strong>Commentaire:</strong> {{ evaluation.comment }}</p>
          <p *ngIf="evaluation.emoji"><strong>Emoji:</strong> {{ evaluation.emoji }}</p>
        </div>
  
        <!-- Liste des commentaires -->
        <div *ngIf="evaluation.comments && evaluation.comments.length > 0">
          <h6>Commentaires :</h6>
          <ul class="list-group">
            <li class="list-group-item" *ngFor="let comment of evaluation.comments">
              <p><strong>Utilisateur :</strong> {{ comment.userId }}</p>
              <p>{{ comment.comment }}</p>
            </li>
          </ul>
        </div>
  
        <!-- Formulaire pour ajouter un commentaire -->
        <form (submit)="addComment(userId.value, comment.value)">
          <div class="form-group">
            <label for="userId">ID Utilisateur</label>
            <input type="text" class="form-control" id="userId" #userId required>
          </div>
          <div class="form-group">
            <label for="comment">Commentaire</label>
            <textarea class="form-control" id="comment" #comment rows="3" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Ajouter Commentaire</button>
        </form>
  
        <!-- Formulaire pour ajouter un emoji -->
        <form class="mt-3">
          <div class="form-group">
            <label for="emoji">Choisir un Emoji</label>
            <div class="btn-group">
              <button type="button" *ngFor="let emoji of emojis" class="btn btn-outline-secondary"
                (click)="selectedEmoji = emoji">{{ emoji }}</button>
            </div>
          </div>
          <button type="button" class="btn btn-info" (click)="addEmojiToEvaluation(evaluation, selectedEmoji)">Ajouter Emoji</button>
        </form>
  
        <!-- Boutons pour confirmer et annuler l'évaluation -->
        <div class="mt-3">
          <button type="button" class="btn btn-success mr-2" (click)="confirmEvaluation()">Confirmer</button>
          <button type="button" class="btn btn-danger" (click)="cancelEvaluation()">Annuler</button>
        </div>
  
      </div>
    </div>
  </div>
  
  <ng-template #noEvaluations>
    <div class="alert alert-warning mt-3">
      Aucune évaluation disponible pour cet atelier.
    </div>
  </ng-template>
  
  <div *ngIf="confirmationMessage" class="alert alert-success mt-3">
    {{ confirmationMessage }}
  </div>
  
  <div *ngIf="cancellationMessage" class="alert alert-danger mt-3">
    {{ cancellationMessage }}
  </div>
  
  <div *ngIf="errorMessage" class="alert alert-danger mt-3">
    {{ errorMessage }}
  </div>
  